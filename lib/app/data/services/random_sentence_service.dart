import 'dart:math';

class RandomSentenceService {
  static final RandomSentenceService _instance = RandomSentenceService._internal();
  factory RandomSentenceService() => _instance;
  RandomSentenceService._internal();

  final Random _random = Random();

  /// 재미있는 문장들을 다양한 카테고리로 분류
  final List<String> _funnySentences = [
    // 일상/코미디 카테고리
    '어제 자전거 타고 갔는데 걸어와서 집에 못 들어갔어요.',
    '아침에 세수하다가 거울 속 내가 나를 보면 기분이 안좋아져요.',
    '요즘 집에서 일하는데 고양이가 Always办公桌上走来走去.',
    '커피를 너무 많이 마셔서 이제 카페인 중독자가 되었습니다.',
    '운동하려고 유튜브를 켰는데 3시간 후에도 누워있네요.',
    '요리하려고 냉장고를 열었는데 거울이 보고있습니다.',
    '전화를하려고 핸드폰을 찾았는데 핸드폰으로 통화중이었어요.',
    '새로 산 옷을 입고 출근했는데 다들 어제 똑같은 옷이라고해요.',
    '세탁기에 넣은 빨래를 2주 후에 꺼냈더니 곰팡이가 피었어요.',
    '식당에서 메뉴를 보는데 읽을 수 있는 글자가 별로 없네요.',

    // 로맨틱한 문장들
    '너가 웃을 때 세상이 조금씩 밝아지는 걸 느껴요.',
    '커피 한 잔의 여유가 있어도 네와 함께라면 충분해요.',
    '비 오는 날 창밖을 보니 네가 생각나서 미소가 나네요.',
    '시간이 흘러도 변하지 않을 게 하나 있다면 바로 네 모습이야.',
    '평범한 하루였는데 네 메시지 한通으로 특별해졌어요.',
    '별이 가득한 밤하늘보다 네 눈빛이 더 아름다워요.',
    '마주설 때마다 심장이 두근대는 건 아직도 익숙하지 않아.',
    '짧은 순간들도 너와 함께라면 오래 기억에 남아.',

    // 모험/판타지 카테고리
    '오래된 도서관에서 발견한 책은 마지막 페이지가 사라져 있었어요.',
    '마법사를 만나고 싶어서 하루 종일 마법을 외워봤는데 전혀 안 되네요.',
    '우연히 발견한 비밀문은 결국 화장실이었지만 기분은 신비롭습니다.',
    '용을 만날 작정이었는데 고라니가 먼저 나타나서 당황했어요.',
    '타임머신을 만졌더니 어제만 되고 싶었는데 3년 전으로 가버렸네요.',
    '마법의 검을 들어봤는데 진짜로 빛이 나서 눈이 부셨어요.',
    '환상 속세계로 가고 싶었는데 지금 있는 곳이 이미 환상 같아요.',
    '드래곤과 싸우려고 겁나게 준비했는데 드래곤이 나보다 겁을 먹었어요.',

    // 감성/심플한 문장들
    '하루가 끝날 때마다 네가 생각나서 좋은 꿈을 꿉니다.',
    '작은 행복들이 쌓여서 의미 있는 하루가 되네요.',
    '혼자만의 시간을 가질 때 가장 진정한 나를 만날 수 있어요.',
    '바람이 조금 차가워도 네와 함께라면 따뜻해요.',
    '혼란스러운 날들도 지나면 좋은 추억으로 남아요.',
    '짧은 침묵도 우리 사이에는 의미가 있나봐요.',
    '돌아오는 길이 조금 더 가벼워진 느낌이에요.',
    '오늘의 마무리时刻에 편안함을 느낍니다.',

    // 논리적이고 철학적인 문장들
    '시간은 흘러도 기억은 그대로 머물러서 신기해요.',
    '말하지 않아도 서로 이해하는 게 참 소중한 능력이에요.',
    '미래를 준비하는 것보다 지금을 살리는 것이 더 중요한 건 아닐까요.',
    '실수는 누구나 하지만 반복하지 않는 것이 중요한 건 아닐까요.',
    '가장 소중한 것들은 눈으로 보이지 않는다는 걸 이제야 이해해요.',
    '성공보다 중요한 건失敗에서 배우는 거라고 생각해요.',
    '우리가 살아있는 이 순간들 하나하나가 특별해요.',
    '변화는 어렵지만 그 끝에 더 나은 내가 있을 거예요.',
  ];

  /// 랜덤한 재미있는 문장을 반환합니다.
  String getRandomSentence() {
    if (_funnySentences.isEmpty) {
      return '오늘도 새로운 하루의 시작입니다.';
    }
    return _funnySentences[_random.nextInt(_funnySentences.length)];
  }

  /// 특정 카테고리별 랜덤 문장을 반환합니다. (향후 확장용)
  String getRandomSentenceByCategory(String category) {
    // 현재는 전체에서 랜덤 선택, 향후 카테고리별 필터링 가능
    return getRandomSentence();
  }

  /// 문장이 마침표로 끝나지 않으면 마침표를 추가합니다.
  String ensureEndsWithPeriod(String sentence) {
    if (sentence.trim().isEmpty) {
      return sentence;
    }

    return sentence.trim().endsWith('.') ? sentence.trim() : '${sentence.trim()}.';
  }
}
